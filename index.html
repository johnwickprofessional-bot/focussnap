<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FocusSnap — Pomodoro + Quick Note</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b4f6c"/>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;background:#f7fbfc;color:#052a36;display:flex;flex-direction:column;min-height:100vh}
    .wrap{max-width:560px;margin:32px auto;padding:18px}
    h1{margin:0 0 12px;font-size:1.6rem}
    .timer{font-size:3.4rem;margin:18px 0;text-align:center}
    button{padding:10px 16px;border-radius:10px;border:0;background:#0b8793;color:white;font-weight:600;margin:6px}
    .notes{margin-top:18px}
    textarea{width:100%;min-height:120px;border-radius:10px;border:1px solid #d9e6ea;padding:10px}
    .controls{text-align:center}
    .small{font-size:0.85rem;color:#316071;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>FocusSnap</h1>
    <div class="small">Pomodoro timer + instant note capture — build focus habits fast.</div>

    <div id="timer" class="timer">25:00</div>
    <div class="controls" id="controls">
      <button id="start">Start</button>
      <button id="stop">Stop</button>
      <button id="reset">Reset</button>
    </div>

    <div class="notes">
      <label for="note"><strong>Quick capture</strong></label>
      <textarea id="note" placeholder="Write a quick note or task..."></textarea>
      <div style="text-align:right;margin-top:8px">
        <button id="save">Save</button>
      </div>
      <ul id="list"></ul>
    </div>
  </div>

<script>
const START = document.getElementById('start');
const STOP = document.getElementById('stop');
const RESET = document.getElementById('reset');
const TIMER = document.getElementById('timer');
const NOTE = document.getElementById('note');
const SAVE = document.getElementById('save');
const LIST = document.getElementById('list');

let defaultSec = 25*60;
let sec = defaultSec;
let interval = null;

function fmt(s){ return String(Math.floor(s/60)).padStart(2,'0')+':'+String(s%60).padStart(2,'0'); }
function render(){ TIMER.textContent = fmt(sec); }

START.onclick = ()=>{
  if(interval) return;
  interval = setInterval(()=>{ if(sec>0){ sec--; render(); } else { clearInterval(interval); interval=null; navigator.vibrate?.(500); alert('Session finished!'); } },1000);
};
STOP.onclick = ()=>{ clearInterval(interval); interval = null; };
RESET.onclick = ()=>{ clearInterval(interval); interval=null; sec=defaultSec; render(); };

SAVE.onclick = ()=>{
  const v = NOTE.value.trim();
  if(!v) return;
  const li = document.createElement('li');
  li.textContent = v;
  LIST.prepend(li);
  NOTE.value='';
  const items = [v].concat(JSON.parse(localStorage.getItem('notes')||'[]'));
  localStorage.setItem('notes', JSON.stringify(items));
};

function loadNotes(){
  const items = JSON.parse(localStorage.getItem('notes')||'[]');
  items.forEach(t=>{ const li=document.createElement('li'); li.textContent=t; LIST.appendChild(li); });
}

render();
loadNotes();

if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/service-worker.js').catch(()=>{});
}
</script>
</body>
</html>

